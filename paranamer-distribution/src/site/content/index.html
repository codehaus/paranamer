<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Introduction</title>
</head>
<body>

<h1>What is it?</h1>
<p>It is a mechamism for accessing the parameter names of methods of
Java classes compiled into jars. Normally the javac compiler drops
parameter names making a method like '<span
  style="font-family: monospace;">doSometing(mypkg.Person toMe)</span>'
look like '<span style="font-family: monospace;">doSomething(mypkg.Person
arg0)</span>' to people using Java's reflection to inspect methods.&nbsp; To
date this has not been very useful to Java application developers, but
with the advent of advanced scripting languages and web action
frameworks for the JVM it is of increasing importance to be able to
leverage a method's parameter names. Scripting languages like <a
  href="http://groovy.codehaus.org/">Groovy</a> &amp; <a
  href="http://jruby.codehaus.org/">JRuby</a>, web action frameworks
like <a href="http://waffle.codehaus.org">Waffle</a> and <a href="#"
  title="http://www.vraptor.org/">VRaptor</a> (that verge on the
tranparent) and the compelling <a href="http://grails.codehaus.org/">Grails</a>.
</p>
<p>ParaNamer allows you to generate and use parameter name info for
versions of Java prior to JDK 7.0 (when Java <span
  style="font-style: italic;">may</span> get parameter name access).
Parameter name access was scheduled for JDK 6.0, bit slipped as the development team ran out of time to implement it. Generation and use are two quite separate things.</p>
<p>Paranamer is Open source, and licensed as BSD. It is compatible with commercial/proprieatry, GPL, Apache use.<br>
</p>
<h1>Quick Start</h1>
<h2>Generating Parameter Name Meta-data with Ant<br>
</h2>
<p>You need to download:</p>
<ul>
  <li><a
    href="http://repository.codehaus.org/com/thoughtworks/paranamer/paranamer/">latest
  paranamer jar</a></li>
  <li><a
    href="http://repository.codehaus.org/com/thoughtworks/paranamer/paranamer-generator/">latest
  paranamer-generator jar</a></li>
  <li><a
    href="http://repository.codehaus.org/com/thoughtworks/paranamer/paranamer-ant/">latest
  paranamer-ant jar</a></li>
  <li><a href="http://repo1.maven.org/maven2/qdox/qdox/">latest
  qdox jar</a> (1.6 or above)</li>
</ul>
and declare in your Ant script the following after &lt;javac/&gt;
(remember to add to the taskdef classpath all the above jars):
<br>
<div class="code">
<div class="codeContent"><pre class="code-java">&lt;taskdef name="paranamer" <br>       classname="com.thoughtworks.paranamer.ant.ParanamerGeneratorTask"/&gt;<br>&lt;paranamer sourceDirectory="src/java" outputDirectory="target/classes"/&gt;<br></pre>
</div>
</div>
<p>Classes are changed to have an extra static String member variable that contains the member functions and their parameter names. Be sure to zip them up in to you final jar.<br>
</p>
<h2>Generating Parameter Name Meta-data with Maven 2<br>
</h2>
For Maven, it is simpler. Just add this to the
&lt;build&gt;&lt;plugins&gt; section of your pom.xml:
<br>
<br>
<div class="code">
<div class="codeContent"><pre style="margin-left: 40px;">&lt;plugin&gt;<br>&nbsp;&nbsp;&nbsp; &lt;groupId&gt;com.thoughtworks.paranamer&lt;/groupId&gt;<br>&nbsp;&nbsp;&nbsp; &lt;artifactId&gt;paranamer-maven-plugin&lt;/artifactId&gt;<br>&nbsp;&nbsp; &nbsp;&lt;executions&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;execution&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;id&gt;run&lt;/id&gt;  &lt;!-- id is optional --&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;configuration&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;sourceDirectory&gt;<span
  style="font-weight: bold;">${basedir}/src/java</span>&lt;/sourceDirectory&gt;<br>&nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;outputDirectory&gt;${basedir}/target/classes&lt;/outputDirectory&gt;<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/configuration&gt;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br> &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;goals&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;goal&gt;run&lt;/goal&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/goals&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/execution&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/executions&gt;<br>&lt;/plugin&gt;</pre>
</div>
</div>
<br>
The jar file will automatically be made with parameter name meta-data.
<br>
<br>
<h2>Using Paranamer<br>
</h2>
<p>If you are leverging the paranamer Jar at runtime, there is a
method called 'lookup' that does the business:</p>
<div class="code">
<div class="codeHeader"><b>MySomethingOrOther.java</b></div>
<div class="codeContent"><pre class="code-java"><span
  class="code-object">
 Method method = Foo.class.getMethod(...);<br>
 Paranamer paranamer = new DefaultParanamer();<br> <br> String[] parameterNames = paranamer.lookupParameterNames(method)<br> </span><br></pre>
</div>
</div>
<p>It throws a ParameterNamesNotFoundException if no parameter names
are found. <br>
</p>
<p>The unit tests for ParaNamer illustrate some of the ways of using
it: <a
  href="http://svn.paranamer.codehaus.org/paranamer/trunk/paranamer/src/test/com/thoughtworks/paranamer/ParanamerExampleTestCase.java">http://svn.paranamer.codehaus.org/paranamer/trunk/paranamer/src/test/com/thoughtworks/paranamer/ParanamerExampleTestCase.java</a><br>
</p>
<p>ParaNamer does not have any runtime jar dependecies while looking
up parameter info previously generated that's been zipped into a jar.<br>
</p>
<h2>Using Paranamer in your application without depending on Paranamer's jar</h2>
<p>There are already too many jar's for day to day Java development
right?&nbsp; Simply consume the paranamer jar into your project's jar using the Maven2 'shade' plugin.<br>
</p>
<div class="code">
<div class="codeHeader"><b>Put in your POM.xml file</b></div>
<div class="codeContent"><pre class="code-java"><span
  class="code-object"> &lt;build&gt;<br>    &lt;plugins&gt;<br>      &lt;plugin&gt;<br>        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;<br>        &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;<br>        &lt;version&gt;1.0-alpha-13-SNAPSHOT&lt;/version&gt;<br>        &lt;executions&gt;<br>          &lt;execution&gt;<br>            &lt;phase&gt;package&lt;/phase&gt;<br>            &lt;goals&gt;<br>              &lt;goal&gt;shade&lt;/goal&gt;<br>            &lt;/goals&gt;<br>            &lt;configuration&gt;<br>              &lt;shadedArtifactId&gt;picocontainer-shaded&lt;/shadedArtifactId&gt;<br>              &lt;artifactSet&gt;&lt;/artifactSet&gt;<br>              &lt;relocations&gt;<br>                &lt;relocation&gt;<br>                  &lt;pattern&gt;com.thoughtworks.paranamer&lt;/pattern&gt;<br>                  &lt;shadedPattern&gt;com.yourcompany.yourapp.paranamer&lt;/shadedPattern&gt;<br>                &lt;/relocation&gt;<br>              &lt;/relocations&gt;<br>            &lt;/configuration&gt;<br>          &lt;/execution&gt;<br>        &lt;/executions&gt;<br>      &lt;/plugin&gt;<br>    &lt;/plugins&gt;<br>  &lt;/build&gt;<br> </span><br></pre>
</div>
</div>

<h2> Paranamer leveraging a the debug information for a class</h2>
<p>If generating meta information for parameter names at compile time
is not for you, try class BytecodeReadingParanamer as a runtime only solution. This uses a cut down forked version of ASM to extract debug information from a class at runtime. As it happens this is the fallback implementation for DefaultParanamer and CachingParanamer, for when there is not pre-built meta information.</p>
<h2> Caching Paranamer</h2>
<p>CachingParanamer  (same API) stores the results of each parameter name lookup, so that second and subsequent invocations will be far quicker.</p>
<p>Its also interesting to note that CachingParanamertries to
use the DefaultParanamer then BytecodeReadingParanamer in the former cannot find
parameter name data.</p>
<h1>How Paranamer works</h1>
<p>It modifies each class file to have an extra static field: <br>
</p>
<div class="code">
<div class="codeContent"><pre class="code-java">    private static final String __PARANAMER_DATA = "v1.0 \n"<br>        + "&lt;init&gt; \n"<br>        + "&lt;init&gt; com.foo.Bar bar \n"<br>        + "toString \n"<br>        + "setName java.lang.String,java.lang.String givenName,familyName \n";<br>        + "setDateOfBirth int,int,int day,month,year \n";<br></pre></div>
</div>
</div>
<p>Clearly the method's source is analysed and lines are added per
method to the __PARANAMER_DATA field.&nbsp;&nbsp;</p>
<h2>What if a parameter names changes?</h2>
In a later version we'll store previous parameter names too. It won't be
be magic, you'll have to code the previous parameter names in your
source with a doclet tag. The lookup mechanism will change too.
<br>
<h1>ParaNamer's Future</h1>
<p>ParaNamer will go away in the future when Java gets Reflection
access to Method parameter names. That should look like:<br>
</p>
<div class="code">
<div class="codeContent"><pre style="margin-left: 40px;"
  class="code-java">Method method = Foo.class.getMethod(....)<br>String[] parameterNames = method.getParameterNames();<br></pre>
<p>But for now, we are thinking of the following directions :-</p>
<ol>
  <li>Plugins for Intellij IDEA, Eclipse, NetBeans to make
  parameter name data as part of their compilation processes</li>
  <li>Storage and retireval of previous parameter names</li>
</ol>
</div>
</div>

<h1>Projects using it</h1>
<a href="http://oval.sourceforge.net/">Oval - Object Validation Framework</a>,<br>
<a href="http://vraptor.org/">VRaptor - Web Framework</a>,<br>
<a href="http://waffle.codehaus.org/">Waffle - Web Framework</a><br>
<h1>Project INFO</h1>
<p>Developers, Maven 2 repository, lists, sites ... all detailed
here:<br>
&nbsp;&nbsp;&nbsp;<a
  href="http://xircles.codehaus.org/projects/paranamer">http://xircles.codehaus.org/projects/paranamer</a><br>
Released Jar files here: <br>
&nbsp;&nbsp;&nbsp;<a
  href="http://repository.codehaus.org/com/thoughtworks/paranamer/">http://repository.codehaus.org/com/thoughtworks/paranamer/</a>
<br>
Snapshot Jar files here: <br>
&nbsp;&nbsp;&nbsp;<a
  href="http://snapshots.repository.codehaus.org/com/thoughtworks/paranamer/">http://snapshots.repository.codehaus.org/com/thoughtworks/paranamer/</a>
</p>

</body>
</html>